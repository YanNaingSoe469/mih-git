{% extends 'master.html' %}

{% block title %}{{user.name}}'s Profile{% endblock %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'profile-style.css' %}">
{% endblock %}

{% block content %}
<h1 class="h1" style="padding-top: 100px;">User Profile</h1>
<div class="row justify-content-center align-items-stretch gx-0 gy-1">

    <!-- LEFT PROFILE CARD -->
    <div class="col-md-4">
        <div class="profile-card text-center">
            {% if user.profile_pic %}
            <img src="{{ user.profile_pic.url }}"
                 class="profile-img"
                 alt="Profile Picture">
            {% else %}
            <img src="{% static 'assets/default-profile.png' %}"
                 class="profile-img"
                 alt="Default Profile">
            {% endif %}
            <h5 class="mt-3 fw-bold">{{user.name}}</h5>
            <a href="{% url 'signout' %}">
                <button type="button" class="btn btn-logout">Log Out</button>
            </a>
        </div>
    </div>

    <div class="col-md-6">
        <div class="d-flex flex-column align-items-center">
            <div class="d-flex justify-content-center gap-4 mb-4">
                <a href="{% url 'update_profile' id=user.id %}">
                    <button class="btn profile-btn px-4">Edit Profile</button>
                </a>
                <a href="{% url 'change_password' %}">
                    <button class="btn profile-btn px-4">Change Password</button>
                </a>
            </div>

            <div class="details-card">
                <div class="label"><b>Email</b></div>
                <div class="value">{{user.email}}</div>
            </div>

            <div class="details-card">
                <div class="label"><b>Phone</b></div>
                <div class="value">{{user.phone}}</div>
            </div>

            <div class="details-card">
                <div class="label"><b>Address</b></div>
                <div class="value">{{user.address}}</div>
            </div>
        </div>
    </div>
    <section class="projects">
        <div>
            <h2 class="section-title">{{ user.name }}'s Projects</h2>

            <div class="project-grid">
                {% for project in projects %}
                <a href="{% url 'project_detail' project.id %}">
                    <div class="card">
                        <span class="tag software">{{ project.type }}</span>
                        <h3>{{ project.title }}</h3>
                        <p>by {{ project.innovator }}</p>
                        <img src="{{ project.cover_photo.url }}" alt="{{ project.title }}"/>
                    </div>
                </a>

                {% empty %}
                <div class="card text-center w-100 py-5">
                    <h4 class="text-muted">No projects yet</h4>
                    <p class="text-muted">Start by creating your first project.</p>
                    <div class="d-flex justify-content-center mt-3">
                        <a href="{% url 'sw_create' %}" class="btn btn-primary btn-sm">
                            Create Project
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

</div>
{% endblock %}